XCOMM ############################################################################
XCOMM ## (Description)
XCOMM ##    Imake file for Fujii's SM library.
XCOMM ## (Update Record) 
XCOMM ##    97/07/26  K.Fujii 	Original version.
XCOMM ##    99/05/16  K.Fujii 	Reorganized directory structure.
XCOMM ############################################################################

/* #define ENABLESHARED */
#include "config/kflib.tmpl"

XCOMM #
XCOMM # Define the name of the library.
XCOMM #
INSTALLDIR = ../../lib
LIBNAME   = GENLIBSM
XCOMM #
XCOMM # Routines to compile.
XCOMM #
OBJS = 	blkdat.o \
		gmh2ff.o \
		gmh2vv.o \
		gmt2qw.o \
		gmw2ff.o \
		gmz2ff.o \
		hioki.o \
		idk2pd.o \
		insmcn.o \
		uhcupl.o \
		usmass.o \
		usvckm.o
XCOMM #--
XCOMM #  Library
XCOMM #--
ALLOBJ = $(OBJS)
#ifdef DOSHRLIB
SharedLibraryTarget($(LIBNAME),$(SOREV),$(ALLOBJ),.,.)
InstallSharedLibrary($(LIBNAME),$(SOREV),$(INSTALLDIR))
#endif
NormalLibraryTarget($(LIBNAME), $(ALLOBJ) )
InstallLibrary($(LIBNAME),$(INSTALLDIR))

blkdat.o: blkdat.F
blkdat.F: include/SMPTAB.inc	Imakefile
	rm -f blkdat.F	
	echo "      block data blkdat" > blkdat.F
	echo "C--" >> blkdat.F
	echo "C  THIS FILE IS AUTOMATICALLY GENERAGED FROM" >> blkdat.F
	echo "C     include/SMPTAB.inc" >> blkdat.F
	echo "C  DO NOT EDIT. EDIT C= COMMENTS IN THESE INCLUDE FILES" >> blkdat.F
	echo "C--" >> blkdat.F
	sed -e 's/^C=/  /' include/SMPTAB.inc >> blkdat.F
	echo "      end" >> blkdat.F

distclean:: clean
	rm -f Makefile

